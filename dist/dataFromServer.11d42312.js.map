{"version":3,"sources":["static/state/dataFromServer.js"],"names":["month","translateMonth","monthStr","Object","keys","filter","item","dataFromServer","placesToReceiveOrReturnCar","carList","tariffsList","currentCar","carToBid","beginFetchPeriod","Date","getFullYear","endFetchPeriod","freePeriods","operationCars","clickedCars","getPlaceId","place","undefined","split","length","place_id","id","a","title","getFreePlace","freePlace","delivery_cost","getDeliveryCost","getCurrentCar","carHashStr","location","hash","slice","car","model","toString","replace","trim","toLocaleLowerCase","getTarrifs","dataSent","currentMonth","$","text","currentMonths","m","prevMonth","lastMonth","currentDay","d","parseInt","currentDays","days","toArray","map","inx","currentYear","y","currentYears","needToDisable","dayId","dt","year"],"mappings":"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","file":"dataFromServer.11d42312.js","sourceRoot":"..","sourcesContent":["/**\n * @file dataFromServer.js\n * @module clietn/state/dataFromServer.js\n*/\n\n\n/**\n * @constant\n*/\nconst month = {\n\t[1]: 'Январь',\n\t[2]: 'Февраль',\n\t[3]: 'Март',\n\t[4]: 'Апрель',\n\t[5]: 'Май',\n\t[6]: 'Июнь',\n\t[7]: 'Июль',\n\t[8]: 'Август',\n\t[9]: 'Сентябрь',\n\t[10]: 'Октябрь',\n\t[11]: 'Ноябрь',\n\t[12]: 'Декабрь',\n}\n/**\n * @function\n * @param {string} monthStr\n * @returns {number}\n*/\nfunction translateMonth(monthStr) {\n\treturn (Object.keys(month).filter(\n\t\t(item) => {\n\t\t\treturn month[item] === monthStr\n\t\t}\n\t))[0];\n}\n/**\n * @constant\n * @property {Array} placeToReceiveOrReturnCar=[]\n*/\nexport const dataFromServer = {\n\tplacesToReceiveOrReturnCar: [], //fill by components/placeSelector.js\n\tcarList: [],\n\ttariffsList: [],\n\tcurrentCar: '',\n\tcarToBid: '',\n\tbeginFetchPeriod: `${new Date().getFullYear()}-01-01 00:00`,\n\tendFetchPeriod: `${new Date().getFullYear()}-12-31 00:00`,\n\tfreePeriods: [],\n\toperationCars: [],\n\tclickedCars: [],\n\t/**\n\t * @property {function} getPlaceId\n\t * @returns {number} \n\t * @description фильтруем placeToReceiveOrReturnCar по полученному аргументу, возвращаем Id найденной записи\n\t*/\n\tgetPlaceId: (place) => {\n\t\tif (!place) return undefined;\n\t\tplace = place.split(' + ');\n\t\tif (place.length != 2) {\n\t\t\treturn dataFromServer.placesToReceiveOrReturnCar[0].place_id;\n\t\t}\n\t\tplace = place[0];\n\n\t\tconst id = dataFromServer.placesToReceiveOrReturnCar.filter(a =>\n\t\t\ta.title === place\n\t\t)[0].place_id;\n\t\treturn id;\n\t},\n\t/**\n\t * @function\n\t * @returns {number} id of place with free delivery cost\n\t*/\n\tgetFreePlace: () => {\n\t\tconst freePlace = dataFromServer.placesToReceiveOrReturnCar.filter(\n\t\t\titem => item.delivery_cost === 0\n\t\t)[0];\n\t\treturn freePlace.place_id;\n\n\t},\n\tgetDeliveryCost: (id) => {\n\t\tconst place = dataFromServer.placesToReceiveOrReturnCar.filter(a => a.place_id === id)[0];\n\t\treturn place ? place.delivery_cost : 0;\n\n\t},\n\t/**\n\t * @function\n\t * @param {string} carStr\n\t * @example\n\t * hyundai_creta -> id\n\t*/\n\t/**\n\t * @function\n\t * @param {string} carHashStr\n\t * @returns carObject\n\t*/\n\tgetCurrentCar: () => {\n\t\tconst carHashStr = location.hash.slice(1, location.hash.length);\n\t\tconst car = dataFromServer.carList.filter(\n\t\t\t(item) => {\n\t\t\t\titem = item.model.toString();\n\t\t\t\titem = item.replace(/\\([^\\s]+\\)/, '');\n\t\t\t\titem = item.trim();\n\t\t\t\titem = item.replace(/\\s/g, '_');\n\t\t\t\titem = item.toLocaleLowerCase();\n\t\t\t\treturn item === carHashStr;\n\t\t\t}\n\t\t);\n\t\tdataFromServer.currentCar = car;\n\t\treturn car;\n\t},\n\t/**\n\t * @function\n\t * @param {number} carId\n\t * @returns {object} tarrrifs for it car\n\t*/\n\tgetTarrifs: () => {\n\n\t},\n\t/**\n\t * @constant\n\t*/\n\tdataSent: false,\n\t/**\n\t * @function\n\t*/\n\tcurrentMonth: () => {\n\t\tconst a = $(`#dp-cal-month-text`).text();\n\t\treturn translateMonth(a);\n\t},\n\t/**\n\t * @function\n\t * @returns {Array}\n\t*/\n\tcurrentMonths: () => {\n\t\tconst m = dataFromServer.currentMonth();\n\t\tconst prevMonth = (m - 1) === 0 ? 12 : m - 1;\n\t\tconst lastMonth = (m + 1) === 13 ? 1 : m + 1;\n\t\treturn [prevMonth, m, lastMonth];\n\t},\n\t/**\n\t * @function\n\t*/\n\tcurrentDay: () => {\n\t\tconst d = $(`.dp-current`).text();\n\t\tif (d) return parseInt(d, 10);\n\t\treturn;\n\t},\n\t/**\n\t * @function\n\t * @returns {Array} of days\n\t*/\n\tcurrentDays: () => {\n\t\tlet days = $(`.dp-day`).toArray();\n\t\tdays = days.map(\n\t\t\t(item, inx) => {\n\t\t\t\treturn item.id;\n\t\t\t}\n\t\t);\n\t\treturn days;\n\t},\n\t/**\n\t * @function\n\t*/\n\tcurrentYear: () => {\n\t\tconst y = $('.dp-cal-year').text();\n\t\tif (y) return parseInt(y, 10);\n\t\treturn;\n\t},\n\t/**\n\t * @function\n\t*/\n\tcurrentYears: () => {\n\t\tconst y = dataFromServer.currentYear();\n\t\treturn [y - 1, y, y + 1];\n\t},\n\t/**\n\t * @function\n\t * @param {String} dayId\n\t * @return {Boolean}\n\t*/\n\tneedToDisable: (dayId) => {\n\n\t\tconst dt = new Date();\n\t\tconst year = dt.getFullYear();\n\t\tif (!dataFromServer.currentYear()) return undefined;\n\n\t\tif (year > dataFromServer.currentYear()) return true;\n\t\treturn false;\n\t}\n};\n\n\n\n\n\n\n\n\n"]}